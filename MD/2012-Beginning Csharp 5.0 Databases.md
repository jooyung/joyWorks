# Introduction
## Who This Book Is For
## How This Book Is Structured
## Conventions
## Downloading the Code
## Contacting the Author
# 1. Getting and Understanding Your Tools
- SMSS: SQL Server Management Studio
- OLTP: Online Transaction Processing

## Obtaining Visual Studio 2012
## Installing SQL Server 2012 Express
Services.msc
## Installing and Attaching the AdventureWorks Sample Database
### Installing the AdventureWorks Database
### Attaching the AdventureWorks Sample Database
**Attach** is the process used to associate the **.mdf** file to the database server so that you can start working with the database objects and data associated with tables.

Set Authentication to **Windows Authentication**. This is the default authentication type SQL Server gets installed with. This indicates that the machin's logged-in user name will be carried over to connect to SQL Server.

c:\Program Files (x86)\Microsoft SQL Server\MSSQL.1\MSSQL\Data\\**AdventureWorks_Data.mdf**
## Summary
# 2. Understanding Relational Databases
## What Is a Database?
DBMSs support **tables (aka relations or entities)** to store data in **rows (aka records or tuples)** and
**columns (aka fields or attributes)**, similar to how data appears in a spreadsheet application.

[W] tuple (to͞o′pəl, tŭp′əl)
- A generalization of ordered pairs, such as (-3, 4), and ordered triples, such as (0, -3, 5), in any dimension. An *n-tuple* is an ordered list of n numbers and can represent a point in n-dimensional space.

## Choosing Between a Spreadsheet and a Database
## Why Use a Database?
## Benefits of Using a Relational Database Management System
## Comparing Desktop and Server RDBMS Systems
### Desktop Databases
### Server Databases
## The Database Life Cycle
[T]
- ER: Entiry-Relationship
- DDL: Data Definition Language
- DML: Data Modification Language

## Mapping Cardinalities
[W] cardinality (ˌkɑːdɪˈnælɪtɪ)
-  (Mathematics) maths logic (of a class) the cardinal number associated with the given class. Two classes have the same cardinality if they can be put in one-to-one correspondence

`Mapping cardinalities`, or `cardinality ratios`, express the number of entities to which another entity can be associated via a relationship set. `Cardinality` refers to the uniqueness of data values contained in a particular column of a database table.

This relationship is actually implemented in a one-many-one format, so it requires a third table (often referred to as a **junction talbe**) to be introduced in between that serves as the path between the related tables.

Though relationships among tables are extremely important, **the term relational database has nothing to
do with them**. Relational databases are (to varying extents) based on the **relational model of data** invented by **Dr. Edgar F. Codd** at IBM in the 1970s. Codd based his model on the mathematical (set-theoretic) concept of a relation. **Relations are sets of tuples** that can be manipulated with a well-defined and well-behaved set of mathematical operations—in fact, two sets: **relational algebra** and **relational calculus**. You don’t have to know or understand the mathematics to work with relational databases, but if you hear it said that a database is relational because it “relates data,” you’ll know that whoever said it doesn’t understand relational databases.
## Understanding Keys
A **key** is one or more columns of a relation that is used to identify a row.
### Primary Keys
Besides helping in uniquely identifying a record, the primary key also helps in searching records because *an index automatically gets generated* as you assign a primary key to an attribute.
- candidate key
- composite key
- up to 16 attributes
- IDENTITY property
- surrogate key

[W] surrogate (sûr′ə-gĭt, -gāt′, sŭr′-)
- surrogate - someone who takes the place of another person
- =alternate, replacement
- <->backup man, fill-in, reliever, stand-in, backup, substitute, relief - someone who takes the place of another (as when things get dangerous or difficult); *"the star had a stand-in for dangerous scenes"; "we need extra employees for summer fill-ins"*

There are at least two definitions of a surrogate:

Surrogate (1) – Hall, Owlett and Todd (1976) A surrogate represents an entity in the outside world. The surrogate is internally generated by the system but is nevertheless visible to the user or application. Surrogate (2) – Wieringa and De Jonge (1991) A surrogate represents an object in the database itself. The surrogate is internally generated by the system and is invisible to the user or application. The Surrogate (1) definition relates to a data model rather than a storage model and is used throughout this article. See Date (1998).

Approaches to generating surrogates include:
- Universally Unique Identifiers (UUIDs)
- Globally Unique Identifiers (GUIDs)
- Object Identifiers (OIDs)
- Sybase or SQL Server identity column IDENTITY OR IDENTITY(n,n)
- Oracle SEQUENCE, or GENERATED AS IDENTITY (starting from version 12.1)[2]
- PostgreSQL or IBM Informix serial
- MySQL AUTO_INCREMENT
- AutoNumber data type in Microsoft Access
- AS IDENTITY GENERATED BY DEFAULT in IBM DB2
- Identity column (implemented in DDL) in Teradata
- Table Sequence when the sequence is calculatd by a procedure and a sequence table with fields: id, - sequenceName, sequenceValue and incrementValue

### Foreign Keys
## Understanding Data Integrity
### Entity Integrity
The requirement that primary key values exist and that they are unique is known as **entity integrity (EI)**.
### Referential Integrity
## Normalization Concepts
Normalized database desgins usually reduce **update processing** costs but can make **query processing** more complicated. These *trade-offs* must be carelly evaluated in terms of the required performance profile of a database. Often, a database design needs to be *denormalized* to adequately meet *operational needs*.

[W] The result of each process is referred to as a normal form. Five normal forms have been identified in theory, but most of the time third normal form (3NF)is `as far as` you need to go in practice.
## Drawbacks of Normalization
Database design is an art more than a technology, and applying normalization wisely is always important.

With either normalization or denormalization, **the goal is to control redundancy** so that the database design *adequately* (and *ideally*, *optimally*) supports the actual use of the database.
## Summary
# 3. Creating Database and Tables
## Launching SQL Server Management Studio
## Types of SQL Server Databases
## The Architecture of a SQL Server Database
## Creating a Database in a Simple Way
## Exploring Database Properties
## Creating Database with Your Own Settings

    ```
    CREATE DATABASE joydb
    ON PRIMARY
    (
        NAME = joyData,
        FILENAME = 'c:\Program Files (x86)\Microsoft SQL Server\MSSQL.1\MSSQL\Data\joyData.mdf',
        SIZE = 5MB,
        MAXSIZE = 15MB,
        FILEGROWTH = 20%
    )
    LOG ON
    (
        NAME = joyLog,
        FILENAME = 'c:\Program Files (x86)\Microsoft SQL Server\MSSQL.1\MSSQL\Data\joyLog.ldf',
        SIZE = 1MB,
        MAXSIZE = 5MB,
        FILEGROWTH = 1MB
    )
    ```

Error
- Access Error on the file: Services->Log On Tab->Check Local System Account
- File Size: 4MB -> 5MB

 SqlConnection conn = new SqlConnection(@"server = .\SQLExpress;integrated security = true; database = joydb");

```
            //- Create command
            private void CommandText_Load(object sender, EventArgs e)
            {
                //- Create connection
                SqlConnection conn = new SqlConnection(@"server = .\SQLExpress;integrated security = true; database = joydb");

                //- Create command
                SqlCommand cmd = new SqlCommand();

                try
                {
                    //- Open connection
                    conn.Open();

                    txtCommandText.AppendText("Connection opened \n");
                    txtCommandText.AppendText("Command created.\n");

                    //- Setting CommandText
                    cmd.CommandText = @"select Name, ProductNumber from Production.Product";
                    txtCommandText.AppendText("Ready to execute SQL Statement: \n\t\t\t" + cmd.CommandText);
                }
                catch (SqlException ex)
                {
                    MessageBox.Show(ex.Message + ex.StackTrace, "Exception Details");
                }
                finally
                {
                    conn.Close();
                    txtCommandText.AppendText("\nConnection Closed.");
                }
            }
```

### Understanding Table Fundamentals
### SQL Server Data Types for Table Columns
### Creating a Table in SQL Server

```
CREATE TABLE MySqlTable
(
    Name varchar(10) Not Null, --Name value is a must and can''t be Null
    Age int,
    SSN varchar(11),
    Date datetime,
    Gender char(6)
)
```

### Adding an IDENTITY Column in a Table
[W] In this case, the table you created is missing a column that can help uniquely identify each person, because a name could be `common` with two people; for example, both might be the same age and gender and without an SSN.

#### ALTER TABLE
```
ALTER TABLE MySqlTable
ADD Id int IDENTITY(1,1)
```

#### DROP and Re-create the Table
```
DROP TABLE MySqlTable

CREATE TABLE MySqlTable
(
    Id int IDENTITY (1,1), --Identity makes the column Not Null internally
    Name varchar(10) Not Null, --Name value is a must and can''t be Null
    Age int,
    SSN varchar(11),
    Date datetime,
    Gender char(6)
)
```


## Summary
# 4. Manipulating Database Data
## Inserting Data
### Try It: Inserting a New Row
### How It Works
## Inserting Multiple Rows Through a Single INSERT Statement
## Updating Data
### Try It: Updating a Row
### How It Works
## Deleting Data
## Summary
# 5. Querying Databases
## Retrieving Data
### Try It: Running a Simple Query
### How It Works
### Using the WHERE Clause
### Using Comparison Operators
## Sorting Data
### Try It: Writing an Enhanced Query
### How It Works
## GROUP BY Clause
### Try It: Using the GROUP BY Clause
### How It Works
## Pattern Matching
### Try It: Using the Percent (%) Character
### How It Works
### Try It: Using the Underscore (_) Character
### How It Works
### Try It: Using the Square Bracket ([]) Characters
### How It Works
### Try It: Using the Square Bracket and Caret ([^ ]) Characters
### How It Works
## Aggregate Functions
### Try It: Using the MIN, MAX, SUM, and AVG Functions
### How It Works
### Try It: Using the COUNT Function
### How It Works
## DATETIME Functions
### Try It: Using T-SQL Date and Time Functions
### How It Works
## List Operator
### Try It: Using the IN Operator
### How It Works
### Try It: Using the NOT IN Operator
### How It Works
## Range Operator
### Try It: Using the BETWEEN Operator
### How It Works
### Try It: Using the NOT BETWEEN Operator
### How It Works
## Finding NULL Values
### Try It: Using IS NULL Operator
### How It Works
### Try It: Using the IS NOT NULL Operator
### How It Works
## Joins
### Inner Joins
### Table Aliasing
### Outer Joins
### Other Joins
## Summary
# 6. Using Stored Procedures
## Creating Stored Procedures
### Try It: Working with Stored Procedures in SQL Server
### How It Works
### Try It: Creating a Stored Procedure with an Input Parameter
### How It Works
### Try It: Creating a Stored Procedure with an Output Parameter
### How It Works
## Modifying Stored Procedures
### Try It: Modifying Your Trivial Stored Procedure
### How It Works
## Displaying the Definition of Stored Procedures
### Try It: Viewing the Definition of Our Stored Procedure
### How It Works
## Renaming Stored Procedures
### Try It: Renaming a Stored Procedure
### How It Works
## Deleting Stored Procedures
### Try It: Deleting a Stored Procedure
## Summary
# 7. Using XML
## Defining XML
## Why XML
## Benefits of Storing Data As XML
## Understanding XML Documents
## Understanding the XML Declaration
## Converting Relational Data to XML
### Using FOR XML RAW
### Try It: Using FOR XML RAW (Attribute-centric)
### How It Works
### Try It: Using FOR XML RAW (Element-centric)
### How It Works
### Try It: Renaming the row Element
### How It Works
### Observations About XML RAW Formatting
### Using FOR XML AUTO
### Try It: Using FOR XML AUTO
### How It Works
### Observations About XML AUTO Formatting
## Using the XML Datatype
### Try It: Creating a Table to Store XML
### How It Works
### Try It: Storing and Retrieving XML Documents
### How It Works
## Summary
# 8. Understanding Transactions
## What Is a Transaction?
### When to Use Transactions
## Understanding ACID Properties
### Transaction Design
## Transaction State
### Specifying Transaction Boundaries
### T-SQL Statements Allowed in a Transaction
### Local Transactions in SQL Server 2012
### Distributed Transactions in SQL Server 2012
### Guidelines to Code Efficient Transactions
### How to Code Transactions
### Coding Transactions in T-SQL
## Summary
# 9. Building Windows Forms Applications
## Understanding Windows Forms
### User Interface Design Principles
### Best Practices for User Interface Design
### Position of Controls
### Fonts
### Images and Icons
### Working with Windows Forms
### Understanding the Design and Code Views
### Sorting Properties in the Properties Window
### Categorized View
## Setting the Properties of Solutions, Projects, and Windows Forms
### Working with Controls
## Setting Dock and Anchor Properties
### Dock Property
### Anchor Property
### Adding a New Form to the Project
### Implementing an MDI Form
## Summary
# 10. Introduction to ADO.NET
## Understanding ADO.NET
### The Motivation Behind ADO.NET
### Moving from ADO to ADO.NET
### ADO.NET Isn’t a New Version of ADO
### ADO.NET and the .NET Base Class Library
### Understanding ADO.NET Architecture
### Understanding .NET Data Providers
### Understanding the SQL Server Data Provider
### Understanding the OLE DB Data Provider
### Understanding the ODBC Data Provider
## Data Providers Are APIs
## Summary
# 11. Handling Exceptions
## The System.Exception Class
## What Causes an Exception to Occur
### Try It: Creating a File-Handling Application
### Try It: Causing an Exception to Occur and Observing the Behavior
## Exploring the Type, Message, and StackTrace Properties of an Exception
## Handling Exceptions
### Try It: Adding Exception-Handling Statements
### How It Works
## Summary
# 12. Making Connections
## Introducing the Data Provider Connection Classes
## Connecting to SQL Server 2012 with SqlConnection
### Try It: Using SqlConnection
### How It Works
### Debugging Connections to SQL Server
### Security and Passwords in SqlConnection
### How to Use SQL Server Security
### Connection String Parameters for SqlConnection
### Connection Pooling
## Improving Your Use of Connection Objects
### Using the Connection String in the Connection Constructor
### Displaying Connection Information
### Try It: Displaying Connection Information
### How It Works
## Connecting to SQL Server with OleDbConnection
### Try It: Connecting to SQL Server with the OLE DB Data Provider
### How It Works
## Summary
# 13. Executing ADO.NET Commands to Retrieve Data
## Creating a Command
### Assigning Text to a Command
## Executing Commands
### Executing Commands with a Scalar Query
## Try It: Using the ExecuteScalar Method
### Executing Commands with Multiple Results
### Executing Nonquery Statements
## Working with Stored Procedures
### Creating a Stored Procedure to Perform a Delete Operation
## Summary
# 14. Using Data Readers
## Understanding Data Readers in General
### Using Ordinal Indexers
### Using Column Name Indexers
### Using Typed Accessor Methods
### Getting Data About Data
### Getting Data About Tables
### Using Multiple Result Sets with a Data Reader
## Summary
# 15. Using Data Sets and Data Adapters
## Understanding the Object Model
### Data Sets vs. Data Readers
### A Brief Introduction to Data Sets
### A Brief Introduction to Data Adapters
### A Brief Introduction to Data Tables, Data Columns, and Data Rows
## Working with Data Sets and Data Adapters
### Filtering and Sorting in a Data Set
### Comparing FilterSort to PopDataSet
### Using Data Views
### Modifying Data in a Dataset
### Propagating Changes to a Data Source
### InsertCommand Property
### Command Builders
### Concurrency
## Using Data Sets and XML
### Understanding Typed and Untyped Data Sets
## Summary
# 16. Using Data Controls with ASP.NET Applications
## Understanding Web Functionality
### The Web Server
## Understanding ASP.NET and Web Pages
## Understanding the Visual Studio 2012 Web Site Types
## Understanding the Layout of an ASP.NET Web Site
## Understanding the Web UI of ASP.NET Web Apps
## Using the Repeater Control
## Summary
# 17. Working with Text and Binary Data
## Understanding SQL Server Text and Binary Data Types
## Storing Images in a Database
### Retrieving Images from a Database
### Working with Text Data
### Retrieving Data from Text Columns
## Summary
# 18. Using LINQ
## Introduction to LINQ
## Architecture of LINQ
## LINQ Project Structure
### Using LINQ to Objects
### Using LINQ to SQL
### Using LINQ to XML
## Summary
# 19. Using the ADO.NET Entity Framework
## Understanding ADO.NET Entity Framework 5.0
## Understanding the Entity Data Model
### Working with the Entity Data Model
## Summary
# 20. Using the CLR in SQL Server
## Introducing SQL CLR
## Choosing Between T-SQL and SQL CLR
## Enabling SQL CLR Integration
## Creating a SQL CLR Stored Procedure
### Try It: Creating a SQL CLR Stored Procedure Using C#
### How It Works
## Deploying a SQL CLR Stored Procedure into SQL Server
### Try It: Deploying SQL CLR C# Stored Procedure in SQL Server
### How It Works
## Executing the SQL CLR Stored Procedure
### Try It: Executing the SQL CLR Stored Procedure
### How It Works
## Summary